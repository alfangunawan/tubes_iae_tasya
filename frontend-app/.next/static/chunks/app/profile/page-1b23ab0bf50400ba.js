(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6141:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},25119:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},65883:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},4322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},67972:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},49940:function(e,t,r){Promise.resolve().then(r.bind(r,48344))},48344:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ProfilePage}});var s=r(57437),a=r(28719),l=r(67972),i=r(4322),n=r(6141),c=r(2265),d=r(24033);function ProfilePage(){var e,t;let r=(0,d.useRouter)(),[o,x]=(0,c.useState)(null),[h,m]=(0,c.useState)([]),[g,y]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{let fetchData=async()=>{let e=localStorage.getItem("token");if(!e){r.push("/login");return}try{let t=await fetch("http://localhost:3000/api/users/profile",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();x(e)}let r=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({query:"\n          query MyOrders {\n            myOrders {\n              id\n              storeName\n              serviceType\n              weight\n              price\n              status\n              createdAt\n            }\n          }\n        "})}),{data:s,errors:a}=await r.json();s&&s.myOrders&&m(s.myOrders)}catch(e){console.error(e)}finally{y(!1)}};fetchData()},[r]),g)?(0,s.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:"Loading..."}):(0,s.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(a.Z,{}),(0,s.jsxs)("div",{className:"pt-28 pb-12 px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Profile"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"md:col-span-1",children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-[#FF385C] rounded-full flex items-center justify-center text-white text-3xl font-bold mb-4",children:null==o?void 0:null===(t=o.name)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.toUpperCase()}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:null==o?void 0:o.name}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:null==o?void 0:o.email}),(0,s.jsx)("div",{className:"w-full border-t border-gray-100 pt-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 mb-2",children:[(0,s.jsx)(l.Z,{size:16}),(0,s.jsxs)("span",{className:"text-sm",children:["Member since ",new Date(null==o?void 0:o.createdAt).getFullYear()]})]})})]})})}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Booking History"}),(0,s.jsx)("div",{className:"space-y-4",children:0===h.length?(0,s.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-500",children:"No bookings yet."}):h.map(e=>{var t;return(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:e.storeName}),(0,s.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1 mt-1",children:[(0,s.jsx)(i.Z,{size:14})," ",e.serviceType," \xb7 ",e.weight," kg"]})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat("PENDING"===e.status?"bg-yellow-100 text-yellow-800":"READY"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t border-gray-100 pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,s.jsx)(n.Z,{size:12}),new Date(parseInt(e.createdAt)).toLocaleDateString()]}),(0,s.jsxs)("span",{className:"font-bold text-gray-900",children:["Rp ",null===(t=e.price)||void 0===t?void 0:t.toLocaleString()]})]})]},e.id)})})]})]})]})]})}},28719:function(e,t,r){"use strict";r.d(t,{Z:function(){return Navbar}});var s=r(57437),a=r(61396),l=r.n(a),i=r(65531);let n=(0,i.Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),c=(0,i.Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var d=r(67972),o=r(25119),x=r(65883),h=r(2265),m=r(24033);function Navbar(){let[e,t]=(0,h.useState)(null),[r,a]=(0,h.useState)(!0),i=(0,m.useRouter)();(0,h.useEffect)(()=>{let fetchUser=async()=>{let e=localStorage.getItem("token");if(!e){a(!1);return}try{let r=await fetch("".concat("http://localhost:3000","/api/users/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();t(e)}else localStorage.removeItem("token")}catch(e){console.error("Failed to fetch user:",e)}finally{a(!1)}};fetchUser()},[]);let g=(null==e?void 0:e.role)==="admin";return(0,s.jsx)("nav",{className:"fixed top-0 w-full z-50 bg-white border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,s.jsx)(l(),{href:"/",className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-[#FF385C] text-2xl font-bold",children:"Smart Laundry"})})}),(0,s.jsxs)("div",{className:"hidden md:flex space-x-8",children:[(0,s.jsx)(l(),{href:"/",className:"text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Home"}),(0,s.jsx)("button",{className:"text-gray-900 border-b-2 border-black px-3 py-2 text-sm font-medium",children:"Services"}),(0,s.jsx)(l(),{href:"/track",className:"text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Track Order"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"hidden md:block text-sm font-medium text-gray-900 hover:bg-gray-100 px-4 py-2 rounded-full cursor-pointer transition",children:"Join as Partner"}),(0,s.jsx)("div",{className:"p-2 hover:bg-gray-100 rounded-full cursor-pointer",children:(0,s.jsx)(n,{size:18})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 border border-gray-300 rounded-full p-1 pl-3 hover:shadow-md transition cursor-pointer relative group",children:[(0,s.jsx)(c,{size:18}),(0,s.jsx)("div",{className:"rounded-full p-1 text-white ".concat(g?"bg-[#FF385C]":"bg-gray-500"),children:(0,s.jsx)(d.Z,{size:18,fill:"white"})}),(0,s.jsx)("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-xl shadow-[0_6px_20px_rgba(0,0,0,0.12)] py-2 hidden group-hover:block border border-gray-100",children:r?(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Loading..."}):e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-4 py-3 hover:bg-gray-50 text-sm font-semibold text-gray-900 border-b border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["Hello, ",e.name,g&&(0,s.jsx)("span",{className:"text-xs bg-[#FF385C] text-white px-2 py-0.5 rounded-full",children:"Admin"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400 font-normal",children:e.email})]}),g&&(0,s.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-sm text-[#FF385C] font-medium",children:[(0,s.jsx)(o.Z,{size:14}),"Admin Dashboard"]}),(0,s.jsx)(l(),{href:"/profile",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-700",children:"My Profile"}),(0,s.jsx)(l(),{href:"/track",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-700",children:"Track Orders"}),(0,s.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,s.jsxs)("div",{onClick:()=>{localStorage.removeItem("token"),t(null),i.push("/"),i.refresh()},className:"block px-4 py-2 hover:bg-gray-50 text-sm text-red-600 cursor-pointer flex items-center gap-2",children:[(0,s.jsx)(x.Z,{size:14})," Log out"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{href:"/login",className:"block px-4 py-2 hover:bg-gray-50 text-sm font-semibold text-gray-900",children:"Log in"}),(0,s.jsx)(l(),{href:"/register",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-500",children:"Sign up"}),(0,s.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,s.jsx)(l(),{href:"/host",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-500",children:"Laundry your home"}),(0,s.jsx)("div",{className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-500",children:"Help Center"})]})})]})]})]})})})}}},function(e){e.O(0,[933,971,472,744],function(){return e(e.s=49940)}),_N_E=e.O()}]);