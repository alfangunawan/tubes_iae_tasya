(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{6141:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},25119:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},60519:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},65883:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},4322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},67972:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(65531);let a=(0,s.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},99865:function(e,t,r){Promise.resolve().then(r.bind(r,37922))},37922:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return TrackOrderPage}});var s=r(57437),a=r(28719),l=r(6141),n=r(65531);let i=(0,n.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var c=r(60519),o=r(4322);let d=(0,n.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),x=(0,n.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var h=r(2265),m=r(24033);let g={PENDING:{color:"text-yellow-700",bgColor:"bg-yellow-100",icon:l.Z,label:"Pending"},CONFIRMED:{color:"text-blue-700",bgColor:"bg-blue-100",icon:i,label:"Confirmed"},PROCESSING:{color:"text-purple-700",bgColor:"bg-purple-100",icon:c.Z,label:"Processing"},READY:{color:"text-green-700",bgColor:"bg-green-100",icon:o.Z,label:"Ready for Pickup"},COMPLETED:{color:"text-gray-700",bgColor:"bg-gray-100",icon:i,label:"Completed"},CANCELLED:{color:"text-red-700",bgColor:"bg-red-100",icon:d,label:"Cancelled"}};function TrackOrderPage(){let e=(0,m.useRouter)(),[t,r]=(0,h.useState)([]),[n,i]=(0,h.useState)(!0),[d,y]=(0,h.useState)(""),[u,p]=(0,h.useState)(null);(0,h.useEffect)(()=>{let t=localStorage.getItem("token");if(!t){e.push("/login");return}try{let e=JSON.parse(atob(t.split(".")[1]));p(e.id),fetchBookings(e.id,t)}catch(e){console.error("Failed to decode token:",e),y("Invalid session. Please login again."),i(!1)}},[e]);let fetchBookings=async(e,t)=>{i(!0),y("");try{let s=await fetch("http://localhost:3000/graphql-booking",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({query:"\n            query MyBookings($userId: String!) {\n                myBookings(userId: $userId) {\n                    id\n                    storeName\n                    serviceType\n                    serviceLabel\n                    weight\n                    totalPrice\n                    checkInDate\n                    status\n                    createdAt\n                    notes\n                }\n            }\n        ",variables:{userId:e}})}),{data:a,errors:l}=await s.json();if(l)throw Error(l[0].message);r(a.myBookings||[])}catch(e){console.error("Failed to fetch bookings:",e),y(e.message)}finally{i(!1)}},formatDate=e=>{try{let t=new Date(e);return t.toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch(t){return e}},getStatusConfig=e=>g[e]||g.PENDING;return n?(0,s.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(a.Z,{}),(0,s.jsx)("div",{className:"pt-28 pb-12 px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(c.Z,{className:"animate-spin text-[#FF385C]",size:40})})})]}):(0,s.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(a.Z,{}),(0,s.jsxs)("div",{className:"pt-28 pb-12 px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Track Your Orders"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"Monitor the status of your laundry orders"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=localStorage.getItem("token");e&&u&&fetchBookings(u,e)},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:[(0,s.jsx)(x,{size:18}),"Refresh"]})]}),d&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:(0,s.jsx)("p",{className:"text-red-700",children:d})}),!d&&0===t.length&&(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[(0,s.jsx)(o.Z,{className:"mx-auto text-gray-300 mb-4",size:64}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"No orders yet"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Start by booking a laundry service from one of our partners."}),(0,s.jsx)("button",{onClick:()=>e.push("/"),className:"bg-[#FF385C] hover:bg-[#E31C5F] text-white font-bold px-6 py-3 rounded-lg transition",children:"Browse Services"})]}),t.length>0&&(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>{let t=getStatusConfig(e.status),r=t.icon;return(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-[#FF385C] rounded-xl flex items-center justify-center text-white",children:(0,s.jsx)(o.Z,{size:24})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:e.storeName}),(0,s.jsxs)("p",{className:"text-gray-500 text-sm",children:[e.serviceLabel||e.serviceType," \xb7 ",e.weight," kg"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-400",children:[(0,s.jsx)(l.Z,{size:14}),(0,s.jsxs)("span",{children:["Check-in: ",formatDate(e.checkInDate)]})]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-semibold ".concat(t.bgColor," ").concat(t.color),children:[(0,s.jsx)(r,{size:14}),t.label]}),(0,s.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:["Rp ",e.totalPrice.toLocaleString()]})]})]}),(0,s.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-100",children:(0,s.jsx)("div",{className:"flex justify-between mb-2",children:["PENDING","CONFIRMED","PROCESSING","READY","COMPLETED"].map((t,r)=>{let a=["PENDING","CONFIRMED","PROCESSING","READY","COMPLETED"].indexOf(e.status),l=r<=a&&"CANCELLED"!==e.status,n="CANCELLED"===e.status;return(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(n?"bg-red-100 text-red-600":l?"bg-[#FF385C] text-white":"bg-gray-200 text-gray-400"),children:r+1}),(0,s.jsx)("span",{className:"text-xs mt-1 text-center ".concat(l&&!n?"text-gray-700":"text-gray-400"),children:t.charAt(0)+t.slice(1).toLowerCase()})]},t)})})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-between text-xs text-gray-400",children:[(0,s.jsxs)("span",{children:["Order ID: ",e.id.slice(0,8),"..."]}),(0,s.jsxs)("span",{children:["Created: ",formatDate(e.createdAt)]})]})]},e.id)})})]})]})}},28719:function(e,t,r){"use strict";r.d(t,{Z:function(){return Navbar}});var s=r(57437),a=r(61396),l=r.n(a),n=r(65531);let i=(0,n.Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),c=(0,n.Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var o=r(67972),d=r(25119),x=r(65883),h=r(2265),m=r(24033);function Navbar(){let[e,t]=(0,h.useState)(null),[r,a]=(0,h.useState)(!0),n=(0,m.useRouter)();(0,h.useEffect)(()=>{let fetchUser=async()=>{let e=localStorage.getItem("token");if(!e){a(!1);return}try{let r=await fetch("".concat("http://localhost:3000","/api/users/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();t(e)}else localStorage.removeItem("token")}catch(e){console.error("Failed to fetch user:",e)}finally{a(!1)}};fetchUser()},[]);let g=(null==e?void 0:e.role)==="admin";return(0,s.jsx)("nav",{className:"fixed top-0 w-full z-50 bg-white border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,s.jsx)(l(),{href:"/",className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-[#FF385C] text-2xl font-bold",children:"Smart Laundry"})})}),(0,s.jsxs)("div",{className:"hidden md:flex space-x-8",children:[(0,s.jsx)(l(),{href:"/",className:"text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Home"}),(0,s.jsx)("button",{className:"text-gray-900 border-b-2 border-black px-3 py-2 text-sm font-medium",children:"Services"}),(0,s.jsx)(l(),{href:"/track",className:"text-gray-500 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Track Order"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"hidden md:block text-sm font-medium text-gray-900 hover:bg-gray-100 px-4 py-2 rounded-full cursor-pointer transition",children:"Join as Partner"}),(0,s.jsx)("div",{className:"p-2 hover:bg-gray-100 rounded-full cursor-pointer",children:(0,s.jsx)(i,{size:18})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 border border-gray-300 rounded-full p-1 pl-3 hover:shadow-md transition cursor-pointer relative group",children:[(0,s.jsx)(c,{size:18}),(0,s.jsx)("div",{className:"rounded-full p-1 text-white ".concat(g?"bg-[#FF385C]":"bg-gray-500"),children:(0,s.jsx)(o.Z,{size:18,fill:"white"})}),(0,s.jsx)("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-xl shadow-[0_6px_20px_rgba(0,0,0,0.12)] py-2 hidden group-hover:block border border-gray-100",children:r?(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Loading..."}):e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-4 py-3 hover:bg-gray-50 text-sm font-semibold text-gray-900 border-b border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["Hello, ",e.name,g&&(0,s.jsx)("span",{className:"text-xs bg-[#FF385C] text-white px-2 py-0.5 rounded-full",children:"Admin"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400 font-normal",children:e.email})]}),g&&(0,s.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-50 text-sm text-[#FF385C] font-medium",children:[(0,s.jsx)(d.Z,{size:14}),"Admin Dashboard"]}),(0,s.jsx)(l(),{href:"/profile",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-700",children:"My Profile"}),(0,s.jsx)(l(),{href:"/track",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-700",children:"Track Orders"}),(0,s.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,s.jsxs)("div",{onClick:()=>{localStorage.removeItem("token"),t(null),n.push("/"),n.refresh()},className:"block px-4 py-2 hover:bg-gray-50 text-sm text-red-600 cursor-pointer flex items-center gap-2",children:[(0,s.jsx)(x.Z,{size:14})," Log out"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{href:"/login",className:"block px-4 py-2 hover:bg-gray-50 text-sm font-semibold text-gray-900",children:"Log in"}),(0,s.jsx)(l(),{href:"/register",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-500",children:"Sign up"}),(0,s.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,s.jsx)(l(),{href:"/host",className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-500",children:"Laundry your home"}),(0,s.jsx)("div",{className:"block px-4 py-2 hover:bg-gray-50 text-sm text-gray-500",children:"Help Center"})]})})]})]})]})})})}}},function(e){e.O(0,[933,971,472,744],function(){return e(e.s=99865)}),_N_E=e.O()}]);