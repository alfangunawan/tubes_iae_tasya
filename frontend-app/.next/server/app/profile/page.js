(()=>{var e={};e.id=178,e.ids=[178],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},20261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(67096),a=s(16132),i=s(37284),n=s.n(i),l=s(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,38461)),"C:\\Users\\alfan\\OneDrive\\Documents\\Data Kuliah\\Tasyakki\\tugas_IAE\\tubes\\tubes_iae\\frontend-app\\src\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,44847)),"C:\\Users\\alfan\\OneDrive\\Documents\\Data Kuliah\\Tasyakki\\tugas_IAE\\tubes\\tubes_iae\\frontend-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\alfan\\OneDrive\\Documents\\Data Kuliah\\Tasyakki\\tugas_IAE\\tubes\\tubes_iae\\frontend-app\\src\\app\\profile\\page.tsx"],x="/profile/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},44552:(e,t,s)=>{Promise.resolve().then(s.bind(s,40211))},40211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ProfilePage});var r=s(30784),a=s(43701),i=s(93680),n=s(37004),l=s(15441),o=s(9885),c=s(57114);function ProfilePage(){let e=(0,c.useRouter)(),[t,s]=(0,o.useState)(null),[d,x]=(0,o.useState)([]),[p,u]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{let fetchData=async()=>{let t=localStorage.getItem("token");if(!t){e.push("/login");return}try{let e=await fetch("http://localhost:3000/api/users/profile",{headers:{Authorization:`Bearer ${t}`}});if(e.ok){let t=await e.json();s(t)}let r=`
          query MyOrders {
            myOrders {
              id
              storeName
              serviceType
              weight
              price
              status
              createdAt
            }
          }
        `,a=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({query:r})}),{data:i,errors:n}=await a.json();i&&i.myOrders&&x(i.myOrders)}catch(e){console.error(e)}finally{u(!1)}};fetchData()},[e]),p)?r.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:"Loading..."}):(0,r.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[r.jsx(a.Z,{}),(0,r.jsxs)("div",{className:"pt-28 pb-12 px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Profile"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsx("div",{className:"md:col-span-1",children:r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-24 h-24 bg-[#FF385C] rounded-full flex items-center justify-center text-white text-3xl font-bold mb-4",children:t?.name?.[0]?.toUpperCase()}),r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t?.name}),r.jsx("p",{className:"text-gray-500 text-sm mb-4",children:t?.email}),r.jsx("div",{className:"w-full border-t border-gray-100 pt-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 mb-2",children:[r.jsx(i.Z,{size:16}),(0,r.jsxs)("span",{className:"text-sm",children:["Member since ",new Date(t?.createdAt).getFullYear()]})]})})]})})}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Booking History"}),r.jsx("div",{className:"space-y-4",children:0===d.length?r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-500",children:"No bookings yet."}):d.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900",children:e.storeName}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1 mt-1",children:[r.jsx(n.Z,{size:14})," ",e.serviceType," \xb7 ",e.weight," kg"]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"READY"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center border-t border-gray-100 pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[r.jsx(l.Z,{size:12}),new Date(parseInt(e.createdAt)).toLocaleDateString()]}),(0,r.jsxs)("span",{className:"font-bold text-gray-900",children:["Rp ",e.price?.toLocaleString()]})]})]},e.id))})]})]})]})]})}},38461:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(95153);let a=(0,r.createProxy)(String.raw`C:\Users\alfan\OneDrive\Documents\Data Kuliah\Tasyakki\tugas_IAE\tubes\tubes_iae\frontend-app\src\app\profile\page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[922,125,322,719,551,287,520,701],()=>__webpack_exec__(20261));module.exports=s})();